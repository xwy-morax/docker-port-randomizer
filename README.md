# Docker Port Randomizer

![ç‰ˆæœ¬](https://img.shields.io/badge/ç‰ˆæœ¬-2.0.0-blue)
![å¹³å°](https://img.shields.io/badge/å¹³å°-Linux-green)
![è¯­è¨€](https://img.shields.io/badge/è¯­è¨€-Bash-yellow)

ä¸€ä¸ªé«˜æ€§èƒ½çš„Dockerç«¯å£éšæœºåˆ†é…å·¥å…·ï¼Œç”¨äºè§£å†³Dockerå®¹å™¨éƒ¨ç½²æ—¶çš„ç«¯å£å†²çªå’Œé€‰æ‹©å›°éš¾é—®é¢˜ã€‚å½“ä½ éœ€è¦éƒ¨ç½²å¤šä¸ªæœåŠ¡ä½†ä¸æƒ³æ‰‹åŠ¨é€‰æ‹©ç«¯å£æ—¶ï¼Œè¿™ä¸ªå·¥å…·å¯ä»¥è‡ªåŠ¨ä¸ºä½ åˆ†é…éšæœºå¯ç”¨ç«¯å£ã€‚

> æœ¬é¡¹å…¨éƒ¨ä»£ç åŠæœ¬ä»‹ç»ç›®ç”± TIG AI å®Œå…¨å¼€å‘ï¼Œå®˜æ–¹ç½‘ç«™ï¼š[https://phapi.furina.junmatec.cn/](https://phapi.furina.junmatec.cn/)

## ç‰¹æ€§

- ğŸš€ **é«˜æ€§èƒ½**ï¼šé‡‡ç”¨"å…ˆéšæœºåéªŒè¯"ç­–ç•¥ï¼Œç§’çº§å®Œæˆç«¯å£åˆ†é…
- ğŸ”„ **è‡ªåŠ¨æ£€æµ‹**ï¼šè‡ªåŠ¨æ’é™¤å·²å ç”¨ç«¯å£ï¼Œç¡®ä¿åˆ†é…çš„ç«¯å£å¯ç”¨
- ğŸ›¡ï¸ **å®‰å…¨å¯é **ï¼šé¿å…å¸¸ç”¨ç«¯å£ï¼ˆå¦‚80ã€443ï¼‰çš„å†²çª
- ğŸŒ **å¹¿æ³›å…¼å®¹**ï¼šæ”¯æŒæ‰€æœ‰Linuxå‘è¡Œç‰ˆï¼Œç‰¹åˆ«ä¼˜åŒ–ç”¨äºUbuntu
- ğŸ”§ **çµæ´»é…ç½®**ï¼šæ”¯æŒè‡ªå®šä¹‰ç«¯å£èŒƒå›´ã€æ’é™¤ç‰¹å®šç«¯å£ç­‰
- ğŸ‡¨ğŸ‡³ **ä¸­æ–‡ç•Œé¢**ï¼šæä¾›å‹å¥½çš„ä¸­æ–‡äº¤äº’ä½“éªŒ

## å®‰è£…

### æ–¹æ³•1ï¼šç›´æ¥ä¸‹è½½

```bash
# ä¸‹è½½è„šæœ¬
curl -o random-port.sh https://raw.githubusercontent.com/xwy-morax/docker-port-randomizer/main/random-port.sh

# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x random-port.sh
```

### æ–¹æ³•2ï¼šå…‹éš†ä»“åº“

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/xwy-morax/docker-port-randomizer.git

# è¿›å…¥ç›®å½•
cd docker-port-randomizer

# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x random-port.sh
```

### å…¨å±€å®‰è£…ï¼ˆæ¨èï¼‰

å°†è„šæœ¬å®‰è£…åˆ°ç³»ç»Ÿè·¯å¾„ï¼Œä½¿å…¶åœ¨ä»»ä½•ç›®å½•ä¸‹éƒ½å¯ç”¨ï¼š

```bash
# ç§»åŠ¨åˆ°ç³»ç»ŸPATHç›®å½•
sudo mv random-port.sh /usr/local/bin/random-port

# ç¡®ä¿å®ƒæœ‰æ‰§è¡Œæƒé™
sudo chmod +x /usr/local/bin/random-port
```

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ç”¨æ³•

```bash
# åŸºæœ¬ç”¨æ³•
random-port "docker run -d -p 80:80 --name my-container my-image"

# ä½¿ç”¨dry-runæ¨¡å¼ï¼ˆä¸æ‰§è¡Œå‘½ä»¤ï¼Œåªæ˜¾ç¤ºç»“æœï¼‰
random-port --dry-run "docker run -d -p 80:80 --name my-container my-image"
```

### é«˜çº§é€‰é¡¹

```bash
# æŒ‡å®šç«¯å£èŒƒå›´
random-port --range 8000-9000 "docker run -d -p 80:80 --name my-container my-image"

# æ’é™¤ç‰¹å®šç«¯å£
random-port --exclude 80,443,3306,5432 "docker run -d -p 80:80 --name my-container my-image"

# è®¾ç½®æœ€å¤§å°è¯•æ¬¡æ•°
random-port --max-tries 100 "docker run -d -p 80:80 --name my-container my-image"
```

### å¸®åŠ©ä¿¡æ¯

```bash
random-port --help
```

## é€‰é¡¹è¯´æ˜

| é€‰é¡¹ | æè¿° |
|------|------|
| `-h, --help` | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ |
| `-v, --version` | æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ |
| `-r, --range` | æŒ‡å®šç«¯å£èŒƒå›´ï¼ˆé»˜è®¤ï¼š1024-65535ï¼‰ |
| `-e, --exclude` | æŒ‡å®šè¦æ’é™¤çš„ç«¯å£ï¼ˆé»˜è®¤ï¼š80,443ï¼‰ |
| `-d, --dry-run` | ä»…æ˜¾ç¤ºä¿®æ”¹åçš„å‘½ä»¤ï¼Œä¸æ‰§è¡Œ |
| `-m, --max-tries` | æœ€å¤§å°è¯•æ¬¡æ•°ï¼ˆé»˜è®¤ï¼š50ï¼‰ |

## å·¥ä½œåŸç†

Docker Port Randomizer ä½¿ç”¨é«˜æ•ˆçš„"å…ˆéšæœºåéªŒè¯"ç­–ç•¥ï¼š

1. éšæœºé€‰æ‹©ä¸€ä¸ªæŒ‡å®šèŒƒå›´å†…çš„ç«¯å£
2. æ£€æŸ¥è¯¥ç«¯å£æ˜¯å¦è¢«å ç”¨æˆ–åœ¨æ’é™¤åˆ—è¡¨ä¸­
3. å¦‚æœç«¯å£å¯ç”¨ï¼Œåˆ™ä½¿ç”¨è¯¥ç«¯å£ï¼›å¦åˆ™é‡æ–°é€‰æ‹©
4. å°†é€‰å®šçš„ç«¯å£æ›¿æ¢åˆ°åŸå§‹Dockerå‘½ä»¤ä¸­
5. è¯¢é—®ç”¨æˆ·æ˜¯å¦é‡‡çº³å¹¶æ‰§è¡Œä¿®æ”¹åçš„å‘½ä»¤

è¿™ç§æ–¹æ³•æ¯”é¢„å…ˆç”Ÿæˆæ‰€æœ‰å¯ç”¨ç«¯å£åˆ—è¡¨è¦å¿«å¾—å¤šï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¤§èŒƒå›´ç«¯å£æ—¶ã€‚

## æ”¯æŒçš„Dockerå‘½ä»¤æ ¼å¼

å·¥å…·æ”¯æŒå¤šç§Dockerç«¯å£æ˜ å°„æ ¼å¼ï¼š

- `-p 80:80`
- `-p=80:80`
- `--publish 80:80`
- `--publish=80:80`

## å¸¸è§é—®é¢˜

### Q: å·¥å…·æ”¯æŒWindows/macOSå—ï¼Ÿ
A: ç›®å‰ä»…æ”¯æŒLinuxç³»ç»Ÿã€‚Windowsç”¨æˆ·å¯ä»¥åœ¨WSLä¸­ä½¿ç”¨ã€‚

### Q: å¦‚ä½•åœ¨CI/CDç®¡é“ä¸­ä½¿ç”¨ï¼Ÿ
A: ä½¿ç”¨`--dry-run`é€‰é¡¹è·å–ä¿®æ”¹åçš„å‘½ä»¤ï¼Œç„¶ååœ¨CI/CDè„šæœ¬ä¸­æ‰§è¡Œã€‚

## è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Šé—®é¢˜æˆ–æå‡ºæ”¹è¿›å»ºè®®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork è¿™ä¸ªä»“åº“
2. åˆ›å»ºä½ çš„ç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤ä½ çš„æ›´æ”¹ (`git commit -m 'Add some amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. å¼€å¯ä¸€ä¸ª Pull Request

## è‡´è°¢

- æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®æä¾›åé¦ˆå’Œå»ºè®®çš„ç”¨æˆ·
- ç‰¹åˆ«æ„Ÿè°¢é‚£äº›åœ¨éƒ¨ç½²å¤šä¸ªDockerå®¹å™¨æ—¶é‡åˆ°ç«¯å£é€‰æ‹©å›°éš¾ç—‡çš„å¼€å‘è€…ä»¬ï¼Œè¿™ä¸ªå·¥å…·å°±æ˜¯ä¸ºä½ ä»¬åˆ›å»ºçš„ï¼

## å…³äºå¼€å‘è€…

æœ¬é¡¹ç›®ç”± TIG å®Œå…¨å¼€å‘ã€‚å¦‚éœ€äº†è§£æ›´å¤šä¿¡æ¯æˆ–æŸ¥çœ‹å…¶ä»–é¡¹ç›®ï¼Œè¯·è®¿é—®æˆ‘ä»¬çš„å®˜æ–¹ç½‘ç«™ï¼š[https://phapi.furina.junmatec.cn/](https://phapi.furina.junmatec.cn/)
```
